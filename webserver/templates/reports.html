<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>YugabyteDB Log Analyzer - Report</title>
    <link rel="stylesheet" href="/static/app.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/showdown@2.1.0/dist/showdown.min.js"></script>
    <script src="/static/app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.0.1/dist/chartjs-plugin-zoom.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --modern-bg: #f7f8fa;
        --modern-card: #fff;
        --modern-border: #e2e8f0;
        --modern-accent: #172447;
        --modern-accent2: #3b5bdb;
        --modern-radius: 14px;
        --modern-shadow: 0 2px 12px rgba(23, 36, 71, 0.07);
      }
      body {
        background: var(--modern-bg);
        font-family: "Inter", sans-serif;
        color: var(--modern-accent);
        margin: 0;
        min-height: 100vh;
      }
      .modern-header {
        display: flex;
        align-items: center;
        gap: 1.2em;
        padding: 2em 0 1.2em 0;
        justify-content: center;
      }
      .modern-header .yuga-logo {
        width: 48px;
        height: 48px;
      }
      .modern-header .yuga-title {
        font-size: 2.1em;
        font-weight: 700;
        letter-spacing: -1px;
      }
      .yuga-container {
        max-width: 1200px;
        margin: 0 auto;
        background: var(--modern-card);
        border-radius: var(--modern-radius);
        box-shadow: var(--modern-shadow);
        border: 1.5px solid var(--modern-border);
        padding: 2.2em 2.5em 2.5em 2.5em;
        margin-bottom: 2.5em;
      }
      .tab-bar {
        display: flex;
        gap: 0.5em;
        margin-bottom: 2em;
        background: #f3f6fa;
        border-radius: var(--modern-radius);
        padding: 0.5em 0.7em;
        box-shadow: 0 1px 4px rgba(23, 36, 71, 0.04);
        overflow-x: auto;
      }
      .tab-btn {
        background: none;
        border: none;
        color: var(--modern-accent2);
        font-size: 1.08em;
        font-weight: 600;
        padding: 0.7em 1.3em;
        border-radius: 8px;
        cursor: pointer;
        transition: background 0.15s, color 0.15s;
      }
      .tab-btn.active,
      .tab-btn:focus {
        background: var(--modern-accent2);
        color: #fff;
        outline: none;
      }
      .tab-panel {
        background: #fafdff;
        border-radius: var(--modern-radius);
        box-shadow: 0 1px 4px rgba(23, 36, 71, 0.04);
        padding: 2em 1.5em 1.5em 1.5em;
        margin-bottom: 1.5em;
      }
      #histogram-controls label {
        margin-right: 1.5em;
        font-weight: 500;
        color: var(--modern-accent);
      }
      #histogram-controls select,
      #histogram-controls input[type="datetime-local"] {
        margin-left: 0.5em;
        padding: 0.4em 0.8em;
        border-radius: 8px;
        border: 1.5px solid var(--modern-border);
        font-size: 1em;
        background: #fff;
        color: var(--modern-accent);
        transition: border 0.18s;
      }
      #histogram-controls select:focus,
      #histogram-controls input[type="datetime-local"]:focus {
        border: 1.5px solid var(--modern-accent2);
        outline: none;
      }
      .modern-toggle-btn {
        background: var(--modern-accent2);
        color: #fff;
        border: none;
        border-radius: 8px;
        padding: 0.45em 1.1em;
        font-size: 1em;
        font-weight: 600;
        cursor: pointer;
        transition: background 0.18s;
        text-decoration: none;
        display: inline-block;
      }
      .modern-toggle-btn:hover {
        background: #2746a0;
      }
      @media (max-width: 900px) {
        .yuga-container {
          padding: 1.2em 0.5em;
        }
        .tab-panel {
          padding: 1em 0.5em;
        }
      }
      @media (max-width: 600px) {
        .modern-header {
          flex-direction: column;
          gap: 0.5em;
          padding: 1.2em 0 0.7em 0;
        }
        .yuga-container {
          padding: 0.5em 0.2em;
        }
        .tab-bar {
          flex-wrap: wrap;
          gap: 0.2em;
          padding: 0.3em 0.2em;
        }
        .tab-btn {
          font-size: 0.97em;
          padding: 0.5em 0.7em;
        }
        .tab-panel {
          padding: 0.7em 0.2em;
        }
      }
    </style>
  </head>
  <body>
    <div class="modern-header">
      <img
        class="yuga-logo"
        src="/img/yugabytedb-icon-seeklogo.svg"
        alt="YugabyteDB Logo"
      />
      <a href="/" style="text-decoration: none; color: inherit"
        ><span class="yuga-title">YugabyteDB Log Analyzer</span></a
      >
    </div>
    <div class="yuga-container">
      <div id="report-warnings"></div>
      <div class="tab-bar">
        <button class="tab-btn active" data-tab="histogram-tab">
          Histogram
        </button>
        <button class="tab-btn" data-tab="table-tab">Table View</button>
        <button class="tab-btn" data-tab="gflags-tab">GFlags</button>
        <button class="tab-btn" data-tab="nodeinfo-tab">Node Info</button>
        <button class="tab-btn" data-tab="logsolutions-tab">Log Details</button>
        <button class="tab-btn" data-tab="warnings-tab" style="display: none">
          Warnings
        </button>
        <button class="tab-btn" data-tab="related-tab">Related Reports</button>
      </div>
      <div id="tab-panels">
        <div id="histogram-tab" class="tab-panel" style="display: block">
          <div id="histogram-controls">
            <label>
              Node
              <select id="nodeSelect"></select>
            </label>
            <label>
              Process
              <select id="logTypeSelect"></select>
            </label>
            <label>
              Time Interval
              <select id="intervalSelect">
                <option value="1">1 minute</option>
                <option value="5">5 minutes</option>
                <option value="15">15 minutes</option>
                <option value="30">30 minutes</option>
                <option value="60" selected>1 hour</option>
              </select>
            </label>
            <label>
              Time Range
              <span
                style="margin-left: 0.4em; cursor: pointer"
                title="Show data from the latest datetime available in the dataset for this report"
              >
                <span
                  style="
                    display: inline-block;
                    width: 18px;
                    height: 18px;
                    border-radius: 50%;
                    background: #e2e8f0;
                    color: #172447;
                    text-align: center;
                    font-weight: bold;
                    font-size: 1em;
                    line-height: 18px;
                  "
                  >i</span
                >
              </span>
              <div style="display: flex; align-items: center; gap: 0.5em">
                <select
                  id="quickRangeSelect"
                  title="Show data from the latest datetime available in the dataset for this report"
                  style="min-width: 120px"
                >
                  <option value="7" selected>Last 7 days</option>
                  <option value="3">Last 3 days</option>
                  <option value="15">Last 15 days</option>
                  <option value="30">Last 30 days</option>
                </select>
                <input
                  type="datetime-local"
                  id="startTimePicker"
                  title="Show data from the latest datetime available in the dataset for this report"
                />
                <span style="font-size: 0.95em; color: #888">to</span>
                <input
                  type="datetime-local"
                  id="endTimePicker"
                  title="Show data from the latest datetime available in the dataset for this report"
                />
                <button
                  id="applyHistogramFilter"
                  class="modern-toggle-btn"
                  style="margin-left: 0; min-width: 60px"
                >
                  Apply
                </button>
              </div>
            </label>
          </div>
          <div id="histogram-chart-container" style="position: relative">
            <div
              id="chart-toggle-btn"
              style="position: absolute; top: 18px; right: 18px; z-index: 2"
            >
              <button
                id="toggleScaleBtnChart"
                class="modern-toggle-btn"
                style="min-width: 160px"
              >
                <span class="toggle-label">Log Scale</span>
                <span class="toggle-circle"></span>
              </button>
            </div>
            <div id="histogram"></div>
          </div>
        </div>
        <div id="table-tab" class="tab-panel" style="display: none">
          <div id="tables"></div>
        </div>
        <div id="gflags-tab" class="tab-panel" style="display: none">
          <div id="gflags"></div>
        </div>
        <div id="nodeinfo-tab" class="tab-panel" style="display: none">
          <div id="nodeinfo"></div>
        </div>
        <div id="logsolutions-tab" class="tab-panel" style="display: none">
          <div id="logsolutions"></div>
        </div>
        <div id="warnings-tab" class="tab-panel" style="display: none">
          <div id="warnings"></div>
        </div>
        <div id="related-tab" class="tab-panel" style="display: none">
          <div id="related-reports"></div>
        </div>
      </div>
    </div>
    <script>
      window.report_uuid = "{{ report_uuid|default('') }}";
      window.logSolutionsMap = {{ log_solutions_map|tojson|safe }};
    </script>
  </body>
</html>
